@model VideoApiWeb.Models.VideoListViewModel
@using VideoApiWeb.Utils

@{
    ViewBag.Title = "Channel Page";
    Layout = "~/Views/Shared/OfficeUIFabricLayout.cshtml";
}

<div class="VideoPortal-page ChannelPage">
    <!-- Spotlight content -->
    <div class="SpotLight-container">
        <div class="u-contentCenter">
            <!-- Use the responsive grid to arrange spotlight video items,
                 as well as the text and images within each item.
             -->
            <div class="SpotLightList ms-Grid">
                <div class="ms-Grid-row ms-u-hiddenMdDown">
                    <h2 class="SpotLight-title ms-font-xxl ms-fontColor-white">Popular Videos</h2>
                </div>
                <div class="ms-Grid-row">
                    <div class="SpotLight-item ms-u-sm12 ms-u-md6 ms-u-lg4">
                        <div class="SpotLight-thumb">
                            <a href="player.html" class="SpotLight-thumbLink">
                                <img class="SpotLight-thumbImg" src="http://lorempixel.com/960/540/business/7" title="Azure Media Services Overview" alt="Azure Media Services Overview">
                            </a>
                        </div>
                        <div class="SpotLight-text ms-font-s-plus">
                            <a href="player.html">
                                <span class="SpotLight-videoTitle">Dynamically procrastinate B2C users after installed base benefits</span>
                                <span class="SpotLight-videoLength">10:28</span>
                            </a>
                        </div>
                    </div>
                    <div class="SpotLight-item ms-u-sm12 ms-u-md6 ms-u-lg4">
                        <div class="SpotLight-thumb">
                            <a href="player.html" class="SpotLight-thumbLink">
                                <img class="SpotLight-thumbImg" src="http://lorempixel.com/960/540/business/5" title="Azure Media Services Overview" alt="Azure Media Services Overview">
                            </a>
                        </div>
                        <div class="SpotLight-text ms-font-s-plus">
                            <a href="player.html">
                                <span class="SpotLight-videoTitle">Dramatically maintain clicks-and-mortar solutions</span>
                                <span class="SpotLight-videoLength">3:49</span>
                            </a>
                        </div>
                    </div>
                    <div class="SpotLight-item ms-u-sm12 ms-u-md6 ms-u-lg4">
                        <div class="SpotLight-thumb">
                            <a href="player.html" class="SpotLight-thumbLink">
                                <img class="SpotLight-thumbImg" src="http://lorempixel.com/960/540/business/4" title="Azure Media Services Overview" alt="Azure Media Services Overview">
                            </a>
                        </div>
                        <div class="SpotLight-text ms-font-s-plus">
                            <a href="player.html">
                                <span class="SpotLight-videoTitle">Seamlessly visualize quality intellectual capital </span>
                                <span class="SpotLight-videoLength">1:56</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main page content -->
    <div class="ChannelPage-content u-contentCenter">
        <div class="ChannelPage-contentCell ms-Grid">
            <div class="ChannelPage-pivots">
                <ul class="ms-Pivot">
                    <li class="ms-Pivot-link is-selected">Popular</li>
                    <li class="ms-Pivot-link">All Videos</li>
                    <li class="ms-Pivot-link">My Videos</li>

                </ul>
            </div>

            <div class="ChannelPage-videos VideoList">
                <div class="ms-Grid-row">
                    @foreach (var item in Model.Videos)
                    {
                        <div class="VideoList-item ms-Grid-col ms-Grid ms-u-sm12 ms-u-md6 ms-u-lg4 ms-u-xl3">
                            <div class="ms-Grid-row">
                                <div class="VideoList-thumb ms-Grid-col ms-u-sm12 ms-u-lg12">
                                    <a href="@Url.Action("Index", "Player", new { channelId = item.ChannelId, videoId = item.VideoId })" class="VideoList-thumbLink">
                                        <img class="VideoList-thumbImg" src="/images/GetVideoThumbnail?channelid=@item.ChannelId&videoid=@item.VideoId&preferredwidth=275" alt="@item.Title">
                                        @*<img class="VideoList-thumbImg" src="@item.ThumbnailUrl" alt="@item.Title">*@
                                        <span class="VideoList-thumbCaption">@HtmlHelpers.ShowHHMMSS(item.DurationInSeconds)</span>
                                    </a>
                                </div>
                                <div class="VideoList-text ms-Grid-col ms-u-sm12 ms-u-lg12">
                                    <a href="@Url.Action("Index", "Player", new { channelId = item.ChannelId, videoId = item.VideoId })"><span class="VideoList-title ms-font-m-plus" title="@item.Title">@item.Title</span></a>
                                    <span class="VideoList-viewCount ms-font-s-plus ms-fontColor-neutralSecondaryAlt">@item.ViewCount views</span>
                                </div>
                            </div>
                        </div>

                    }

                    <div class="VideoList-item ms-Grid-col ms-Grid ms-u-sm12 ms-u-md6 ms-u-lg4 ms-u-xl3">
                        <div class="ms-Grid-row">
                            <div class="VideoList-thumb ms-Grid-col ms-u-sm12 ms-u-lg12">
                                <a href="player.html" class="VideoList-thumbLink">
                                    <img class="VideoList-thumbImg" src="http://lorempixel.com/300/168/business/6" alt="Video Title">
                                    <span class="VideoList-thumbCaption">8:35</span>
                                </a>
                            </div>
                            <div class="VideoList-text ms-Grid-col ms-u-sm12 ms-u-lg12">
                                <a href="player.html"><span class="VideoList-title ms-font-m-plus" title="Dynamically innovate resource-leveling customer service">Dynamically innovate resource-leveling customer service</span></a>
                                <span class="VideoList-viewCount ms-font-s-plus ms-fontColor-neutralSecondaryAlt">92 views</span>
                            </div>
                        </div>
                    </div>

                    <div class="VideoList-item ms-Grid-col ms-Grid ms-u-sm12 ms-u-md6 ms-u-lg4 ms-u-xl3">
                        <div class="ms-Grid-row">
                            <div class="VideoList-thumb ms-Grid-col ms-u-sm12 ms-u-lg12">
                                <a href="player.html" class="VideoList-thumbLink">
                                    <img class="VideoList-thumbImg" src="http://lorempixel.com/300/168/business/7" alt="Video Title">
                                    <span class="VideoList-thumbCaption">10:28</span>
                                </a>
                            </div>
                            <div class="VideoList-text ms-Grid-col ms-u-sm12 ms-u-lg12">
                                <a href="player.html"><span class="VideoList-title ms-font-m-plus" title="Dynamically procrastinate B2C users after installed base benefits">Efficiently procrastinate B2C users after installed base benefits</span></a>
                                <span class="VideoList-viewCount ms-font-s-plus ms-fontColor-neutralSecondaryAlt">499 views</span>
                            </div>
                        </div>
                    </div>

                    <div class="VideoList-item ms-Grid-col ms-Grid ms-u-sm12 ms-u-md6 ms-u-lg4 ms-u-xl3">
                        <div class="ms-Grid-row">
                            <div class="VideoList-thumb ms-Grid-col ms-u-sm12 ms-u-lg12">
                                <a href="player.html" class="VideoList-thumbLink">
                                    <img class="VideoList-thumbImg" src="http://lorempixel.com/300/168/business/8" alt="Video Title">
                                    <span class="VideoList-thumbCaption">6:32</span>
                                </a>
                            </div>
                            <div class="VideoList-text ms-Grid-col ms-u-sm12 ms-u-lg12">
                                <a href="player.html"><span class="VideoList-title ms-font-m-plus" title="Completely synergize resource sucking relationships.">Completely synergize resource sucking relationships</span></a>
                                <span class="VideoList-viewCount ms-font-s-plus ms-fontColor-neutralSecondaryAlt">378 views</span>
                            </div>
                        </div>
                    </div>

                    <div class="VideoList-item ms-Grid-col ms-Grid ms-u-sm12 ms-u-md6 ms-u-lg4 ms-u-xl3">
                        <div class="ms-Grid-row">
                            <div class="VideoList-thumb ms-Grid-col ms-u-sm12 ms-u-lg12">
                                <a href="player.html" class="VideoList-thumbLink">
                                    <img class="VideoList-thumbImg" src="http://lorempixel.com/300/168/business/1" alt="Video Title">
                                    <span class="VideoList-thumbCaption">10:45</span>
                                </a>
                            </div>
                            <div class="VideoList-text ms-Grid-col ms-u-sm12 ms-u-lg12">
                                <a href="player.html"><span class="VideoList-title ms-font-m-plus" title="Seamlessly visualize quality intellectual capital ">Seamlessly visualize quality intellectual capital </span></a>
                                <span class="VideoList-viewCount ms-font-s-plus ms-fontColor-neutralSecondaryAlt">345 views</span>
                            </div>
                        </div>
                    </div>

                    <div class="VideoList-item ms-Grid-col ms-Grid ms-u-sm12 ms-u-md6 ms-u-lg4 ms-u-xl3">
                        <div class="ms-Grid-row">
                            <div class="VideoList-thumb ms-Grid-col ms-u-sm12 ms-u-lg12">
                                <a href="player.html" class="VideoList-thumbLink">
                                    <img class="VideoList-thumbImg" src="http://lorempixel.com/300/168/business/2" alt="Video Title">
                                    <span class="VideoList-thumbCaption">2:59</span>
                                </a>
                            </div>
                            <div class="VideoList-text ms-Grid-col ms-u-sm12 ms-u-lg12">
                                <a href="player.html"><span class="VideoList-title ms-font-m-plus" title="Synergizing across organizations">Synergizing across organizations</span></a>
                                <span class="VideoList-viewCount ms-font-s-plus ms-fontColor-neutralSecondaryAlt">66 views</span>
                            </div>
                        </div>
                    </div>
                </div>@* video's *@
                <h2 className="ms-font-xxl">My groups</h2>
                <div class="ms-Grid">
                    <div class="ms-Grid-row">
                        @foreach (var item in Model.Groups)
                        {
                            <div class="ms-Grid-col ms-u-sm3">
                                <div class="ms-Persona">
                                    <div class="ms-Persona-imageArea">
                                        <div class="ms-Persona-initials ms-Persona-initials--blue">
                                            @item.DisplayName.Substring(0, 2).ToUpper()
                                        </div>

                                        <img class="ms-Persona-image" src="images/GetGroupImage?groupid=@item.Id">
                                        @* deze moeten we client-side async gaan ophalen *@
                                    </div>
                                    <div class="ms-Persona-details">
                                        <div class="ms-Persona-primaryText" title="@item.DisplayName">
                                            <a href="" target="_blank">@item.DisplayName</a>
                                        </div><div class="ms-Persona-secondaryText" title="@item.Description">@item.Description</div>
                                    </div>
                                </div>
                            </div>

                        }
                    </div>
                </div>@* groups *@

                @* incoming messages *@
                <div class="ms-Grid">
                    <div class="ms-Grid-row">
                        <h2>Messages</h2>
                        <p>You'll get a notification when your user receives an email. The messages display below.</p>
                        <br />
                        <div id="message"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @Scripts.Render("~/Scripts/jquery.signalR-2.2.1.min.js")
    @Scripts.Render("~/signalr/hubs")

    <script>
var connection = $.hubConnection();
var hub = connection.createHubProxy("NotificationHub");
hub.on("showNotification", function (messages) {
    $.each(messages, function (index, value) {     // Iterate through the message collection
        var message = value;                       // Get current message

        var table = $("<table></table>");
        var header = $("<th>Message</th>").appendTo(table);

        for (prop in message) {                    // Iterate through message properties
            var property = message[prop];
            var row = $("<tr></tr>");

            $("<td></td>").text(prop).appendTo(row);
            $("<td></td>").text(property).appendTo(row);
            table.append(row);
        }
        $("#message").append(table);
        $("#message").append("<br />");
    });
});
connection.start();
    </script>
}
